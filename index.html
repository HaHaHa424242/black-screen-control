<!DOCTYPE html>
<html lang="zh-TW">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>é»‘å±æ§åˆ¶å°</title>
   <style>
       body {
           text-align: center;
           font-family: 'Arial', sans-serif;
           background-color: #1a1a1a;
           color: white;
           margin: 0;
           padding: 0;
           display: flex;
           flex-direction: column;
           justify-content: center;
           align-items: center;
           height: 100vh;
       }
       h1 {
           margin-top: 0;
           font-size: 2.5rem;
           color: #ff4d4d;
           text-shadow: 0 0 10px #ff4d4d, 0 0 20px #ff4d4d;
       }
       .button-container {
           display: flex;
           gap: 20px;
           margin-top: 20px;
       }
       button {
           font-size: 1.2rem;
           padding: 15px 30px;
           background-color: #ff4d4d;
           color: white;
           border: none;
           cursor: pointer;
           border-radius: 10px;
           transition: background-color 0.3s ease, transform 0.2s ease;
           box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
       }
       button:hover {
           background-color: #e60000;
           transform: translateY(-2px);
       }
       button:active {
           transform: translateY(0);
       }
       #status {
           margin-top: 30px;
           font-size: 1.2rem;
           color: #ffcc00;
           text-shadow: 0 0 5px #ffcc00;
       }
       .glow {
           animation: glow 1.5s infinite alternate;
       }
       @keyframes glow {
           from {
               text-shadow: 0 0 5px #ffcc00, 0 0 10px #ffcc00, 0 0 20px #ffcc00;
           }
           to {
               text-shadow: 0 0 10px #ffcc00, 0 0 20px #ffcc00, 0 0 30px #ffcc00;
           }
       }
   </style>
</head>
<body>
   <h1>ğŸ“´ é»‘å±æ§åˆ¶å°</h1>
   <div class="button-container">
       <button onclick="sendBlackScreen()">ğŸ”² è®“æ‰€æœ‰é›»è…¦é»‘å±</button>
       <button onclick="restoreScreen()">ğŸ”³ è§£é™¤é»‘å±</button>
   </div>
   <p id="status" class="glow">ç‹€æ…‹: æ­£åœ¨ç­‰å¾…ä¼ºæœå™¨é€£æ¥...</p>


   <script>
       let server_ip = "192.168.1.9";  // âš ï¸ è¨˜å¾—æ”¹æˆä½ çš„ä¼ºæœå™¨ IPï¼Œä¾‹å¦‚ "192.168.1.100"
       let ws;
       let isConnected = false;


       // ç•¶æŒ‰éˆ•è¢«é»æ“Šæ™‚ï¼Œç™¼é€é»‘å±æŒ‡ä»¤
       function sendBlackScreen() {
           if (ws && ws.readyState === WebSocket.OPEN) {
               ws.send("black_screen");
               alert("âœ… é»‘å±æŒ‡ä»¤å·²ç™¼é€ï¼");
           } else {
               alert("âŒ é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¼ºæœå™¨æ˜¯å¦é–‹å•Ÿ");
           }
       }


       // ç•¶æŒ‰éˆ•è¢«é»æ“Šæ™‚ï¼Œç™¼é€è§£é™¤é»‘å±æŒ‡ä»¤
       function restoreScreen() {
           if (ws && ws.readyState === WebSocket.OPEN) {
               ws.send("restore_screen");
               alert("âœ… è§£é™¤é»‘å±æŒ‡ä»¤å·²ç™¼é€ï¼");
           } else {
               alert("âŒ é€£ç·šå¤±æ•—ï¼Œè«‹æª¢æŸ¥ä¼ºæœå™¨æ˜¯å¦é–‹å•Ÿ");
           }
       }


       // WebSocket é€£ç·šè™•ç†
       function connectToServer() {
           ws = new WebSocket(`ws://${server_ip}:12345`);
          
           // ç•¶é€£ç·šæˆåŠŸæ™‚
           ws.onopen = function() {
               console.log("é€£æ¥åˆ°ä¼ºæœå™¨");
               document.getElementById("status").textContent = "ç‹€æ…‹: å·²é€£æ¥åˆ°ä¼ºæœå™¨";
               isConnected = true;
           };


           // ç•¶æ”¶åˆ°è¨Šæ¯æ™‚
           ws.onmessage = function(event) {
               console.log("æ”¶åˆ°è¨Šæ¯: ", event.data);
               if (event.data === "black_screen") {
                   document.getElementById("status").textContent = "ç‹€æ…‹: é»‘å±æŒ‡ä»¤å·²ç™¼é€åˆ°æ‰€æœ‰é›»è…¦";
               } else if (event.data === "restore_screen") {
                   document.getElementById("status").textContent = "ç‹€æ…‹: è§£é™¤é»‘å±æŒ‡ä»¤å·²ç™¼é€åˆ°æ‰€æœ‰é›»è…¦";
               }
           };


           // ç•¶é€£ç·šé—œé–‰æ™‚
           ws.onclose = function() {
               console.log("ä¼ºæœå™¨é€£ç·šå·²é—œé–‰");
               document.getElementById("status").textContent = "ç‹€æ…‹: ä¼ºæœå™¨é€£ç·šå·²é—œé–‰";
               isConnected = false;
           };


           // ç•¶ç™¼ç”ŸéŒ¯èª¤æ™‚
           ws.onerror = function(error) {
               console.error("WebSocket éŒ¯èª¤: ", error);
               document.getElementById("status").textContent = "ç‹€æ…‹: ä¼ºæœå™¨é€£ç·šéŒ¯èª¤";
           };
       }


       // é é¢è¼‰å…¥å¾Œè‡ªå‹•é€£æ¥ä¼ºæœå™¨
       window.onload = function() {
           connectToServer();
       }
   </script>
</body>
</html>
